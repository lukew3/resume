<%
def formatDate(dateString)
  if dateString == '1111-11'
    return 'Present'
  end
  monthHash = {  '01': 'January',
                 '02': 'February',
                 '03': 'March',
                 '04': 'April',
                 '05': 'May',
                 '06': 'June',
                 '07': 'July',
                 '08': 'August',
                 '09': 'September',
                 '10': 'October',
                 '11': 'November',
                 '12': 'December' }
  "#{monthHash[:"#{dateString[5..6]}"]} #{dateString[0..3]}"
end
%>
\documentclass[letterpaper]{article}
    \usepackage{fullpage}
    \usepackage{mathptmx}
    \usepackage{amsmath}
    \usepackage{amssymb}
    \usepackage{textcomp}
    \usepackage[utf8]{inputenc}
    \usepackage[T1]{fontenc}
    \usepackage{enumitem}

    % Packages used only for watermark
    \usepackage{eso-pic}
    \usepackage{xcolor}

    \setlist{leftmargin=6mm} % Set bullet point margin %
    \textheight=10in
    \pagestyle{empty}
    \raggedright
    \usepackage[left=0.6in,right=0.6in,bottom=0.7in,top=0.7in]{geometry}
    \input{glyphtounicode}
    \pdfgentounicode=1

    %\renewcommand{\encodingdefault}{cg}
%\renewcommand{\rmdefault}{lgrcmr}

\def\bull{\vrule height 0.8ex width .7ex depth -.1ex }

% Add text watermark to the bottom right of each page
\AddToShipoutPictureBG{%
  \AtTextLowerLeft{%
    \raisebox{-1cm}{\makebox[\paperwidth][r]{\textsf{\small \textcolor[rgb]{0.8,0.8,0.8}{https://github.com/lukew3/resume v1.10.2}}\hspace{3cm}}}%
  }%
}

% DEFINITIONS FOR RESUME %%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\lineunder} {
    \vspace*{-8pt} \\
    \hspace*{-18pt} \hrulefill \\
}

\newcommand{\header} [1] {
    {\hspace*{-18pt}\vspace*{6pt} \textsc{#1}}
    \vspace*{-6pt} \lineunder
}

% END RESUME DEFINITIONS %%%%%%%%%%%%%%%%%%%%%%%

    \begin{document}
\vspace*{-40pt}

    

%==== Profile ====%
\vspace*{-10pt}
\begin{center}
	{\Huge \scshape {<%= basics['name'] %>}}\\
	<%= basics['location']['address'] %> $\cdot$ <%= basics['email'] %> $\cdot$ <%= basics['website'] %>\\
\end{center}

%==== Education ====%
\header{Education}
\vspace{1mm}
<% education.each do |school| %>
    \textbf{<%= school['institution'] %>}\hfill <%= formatDate(school['startDate']) + ' - ' + formatDate(school['endDate']) %>\\
    <%= school['studyType'] %> <%= school['area'] %>\hfill <%= school['gpa'] ? "\\textit{GPA: #{school['gpa']}}" : ''%>\\
    \vspace{2mm}
<% end %>

%==== Skills ====%
\header{Skills}
\vspace{1.5mm}
\hspace{-3mm}
\begin{tabular}{ l l }
<% skills.each do |skill| %>
    <%= skill['name'] %>:   & <%= skill['keywords'].map{ |e| "#{e}"}.join(', ') %>  \\
<% end %>
\end{tabular}
\vspace{2mm}

%==== Experience ====%
\header{Work Experience}
\vspace{1mm}

<% work.each_with_index do |job, index| %>
    <% if index == 0 or work[index-1]['location'] != work[index]['location'] %>
    	\textbf{<%= job['company'] %>} \hfill <%= job['location'] %>\\
    <% end %>
    \textit{<%= job['position'] %>} \hfill <%= formatDate(job['startDate']) + ' - ' + formatDate(job['endDate']) %>\\
    \vspace{-7pt}
    \begin{itemize} \itemsep -1mm
        <% job['highlights'].each do |highlight| %>
            \item <%= highlight %>
        <% end %>
    \end{itemize}
    \vspace{-2mm}
<% end %>

%==== Certificates ====%
<% if certificates.length() > 0 %>
\header{Certificates}
<% certificates.each do |cert| %>
    {\textbf{<%= cert['name'] %>}} \hfill <%= formatDate(cert['date']) %>\\
    \vspace*{2mm}
<% end %>
<% end %>

%==== Leadership ====%
\header{Leadership}
\vspace{1mm}

<% volunteer.each do |job| %>
    \textbf{<%= job['organization'] %>} \textit{/ <%= job['position'] %>} \hfill <%= formatDate(job['startDate']) + ' - ' + formatDate(job['endDate']) %>\\
    %>\\
    \vspace{-2mm}
    \begin{itemize} \itemsep -1pt
    <% job['highlights'].each do |highlight| %>
        \item <%= highlight %>
    <% end %>
    \end{itemize}
    \vspace{-1mm}
<% end %>

%==== Projects ====%
\header{Projects}
<% projects.each do |project| %>
    {\textbf{<%= project['name'] %>}} {\sl <%= project['keywords'].map{ |e| "#{e}"}.join(', ') %>} \hfill <%= project['url'] %>\\
    <%= project['description'] %>\\
    \vspace*{2mm}
<% end %>

\end{document}
